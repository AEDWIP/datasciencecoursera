---
title: "RegressionModelCourseProject"
author: "Andrew E. Davidson"
date: "May 23, 2015"
output: html_document
---
### I ran into problems running Knit PDF in R Studio
Unfortunatly my report is not formated as nicely as I might like. Knit did
not work on my Mac. As a work around set the Knit format to html and used my
browser to convert it into HTML. This makes the report take up much more space

# Explore the mtcars data set
Probably the most useful thing to do is read the data set description. Using
? mtcars we see the data set contains 11 variables, including such as engine size, number of gears, ... We'll need to adjust our models to account for these variable.

Lets take a look at some of the raw sample data
```{r echo=FALSE}
head(mtcars)
```

Using scatter plots we can identify variables that might be good predictors of miles per gallon. We are looking for variables that seem to have strong linear tendency. For example displayment. We are also looking for variables that might be confounding. For example we would expect the more gears a car has the better the miles per gallon would be. Just looking st the scatter plot, It looks like cars with 4 gears might do better than cars with either 3 or 5 gears suggesting that something else is going on. The confounding effect may have to do with how the test was run. Did the take the care out on track and run at a high speed for long time? If so we would expect cars with 5 gears to consistently outperform the others holding things like weight, engine size, ... constant



```{r echo=FALSE}
library(ggplot2)
cylPlot <- ggplot(mtcars, aes(y=mpg, x=cyl))
cylPlot <- cylPlot + geom_point(color="firebrick")

dispPlot <- ggplot(mtcars, aes(y=mpg, x=disp))
dispPlot <- dispPlot + geom_point(color="salmon")

wtPlot <- ggplot(mtcars, aes(y=mpg, x=wt))
wtPlot <- wtPlot + geom_point(color="olivedrab")

amPlot <- ggplot(mtcars, aes(y=mpg, x=am))
amPlot <- amPlot + geom_point(color="yellow")

gearPlot <- ggplot(mtcars, aes(y=mpg, x=gear))
gearPlot <- gearPlot + geom_point(color="skyblue")

carbPlot <- ggplot(mtcars, aes(y=mpg, x=carb))
carbPlot <- carbPlot + geom_point(color="black")

library(grid)

pushViewport(viewport(layout = grid.layout(2, 3)))
print(cylPlot, vp = viewport(layout.pos.row = 1, layout.pos.col = 1))
print(dispPlot, vp = viewport(layout.pos.row = 1, layout.pos.col = 2))
print(wtPlot, vp = viewport(layout.pos.row = 1, layout.pos.col = 3))

print(amPlot, vp = viewport(layout.pos.row = 2, layout.pos.col = 1))
print(gearPlot, vp = viewport(layout.pos.row = 2, layout.pos.col = 2))
print(carbPlot, vp = viewport(layout.pos.row = 2, layout.pos.col = 3))
```

# Is an automatic or manual transmission better for MPG?
To solve this problem, we need to create a linear model that predicts MPG. We can notsimply using the factor variable am, (automatic or manual transmision) as apredictor. We'll need to adjust for other factors suche as weight, number of gears,engine size, ... To keep things simple we will assume there are no interaction between variables. That is to say our model does not have predictors variable of the form wt * disp.

First we need to decide what variables to use in our model. If we create a 
linear model using all the variable and look at the col Pr(>|t|) the best predictor seems to be vehicle weight. the Pr() value is still lower than we would normally like. The Estimate for wt is -3.7, which means for every 1000 lbs increase in vehicle weight we would expect MPG to decrese by 3.7. (Assuming we did not change any of the other variables like engine size, transmission, ...)

Whats interesting is if we look at the unadjust model. That is to say the model with a single predictor variable of weight, the are t value is signifigant! The size of the effect is also much stronger.

The intecept row represents the mpg variable. We can think of the intercep as the expected MPG when all of the perdictors are zero. This is not particully meaningful. What does it mean to have a car with an engine displayment equal to zero.

The next step to try a couple of different models. That is to say choose different covariants and see if we can improve the t values. I got the most signifigant results with predictors of wt and cyl. Adding gear, carb, drat, and disp reduced signifigance so in the interested of having the simplest possible model I did not include them in my final model
```{r}
summary(lm(mpg ~ ., data=mtcars))$coefficients

summary(lm(mpg ~ wt, data=mtcars))$coefficients

summary(lm(mpg ~ wt + cyl + am, data=mtcars))$coefficients

```

# cut-n-paste save
```{r}
fit <- lm(mtcars$mpg ~ mtcars$am)
coef(fit)

g <- ggplot(mtcars, aes(x=am, y=mpg))
g <- g + geom_smooth(method="lm", formula=y~x)
g
```
# original template bellow

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
summary(cars)
```

You can also embed plots, for example:

```{r, echo=FALSE}
plot(cars)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
