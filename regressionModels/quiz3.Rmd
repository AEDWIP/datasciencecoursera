---
title: "quiz 3"
author: "Andrew E. Davidson"
date: "May 24, 2015"
output: html_document
---

##Question 1
Consider the mtcars data set. Fit a model with mpg as the outcome that includes number of cylinders as a factor variable and weight as confounder. Give the adjusted estimate for the expected change in mpg comparing 8 cylinders to 4.

Using str it turns out cyl, gear, am, and carb are numeric, not factors. We'll
need to convert them
```{r}
str(mtcars)
mtcars$cyl <- factor(mtcars$cyl)
```

cyl levels are 4, 6, and 8. by default R will set the refference varriable 
(ie intercept) to the lowest level. intercept will be 4 cylinders
```{r}
summary(lm(mpg ~ cyl + wt, data=mtcars))$coefficients
c <- summary(lm(mpg ~ cyl + wt, data=mtcars))$coefficients
cyl4 <- c[1]
cyl6 <- c[2]
cyl8 <- c[3]
#cyl4 - cyl8
```
answer is cyl8 == -6.0


## question 2
Consider the mtcars data set. Fit a model with mpg as the outcome that includes number of cylinders as a factor variable and weight as a possible confounding variable. Compare the effect of 8 versus 4 cylinders on mpg for the adjusted and unadjusted by weight models. Here, adjusted means including the weight variable as a term in the regression model and unadjusted means the model without weight included. What can be said about the effect comparing 8 and 4 cylinders after looking at models with and without weight included?.

```{r}
cWithWt <- summary(lm(mpg ~ cyl + wt, data=mtcars))$coefficients
cWithWt
cWith8 <- cWithWt[3]
cWithOut <- summary(lm(mpg ~ cyl, data=mtcars))$coefficients
cWithOut
ccWithout8 <- cWithOut[3]

cWith8
ccWithout8

cWith8 - ccWithout8
```
'holding wt constant' means model with out wt


best answer
"Holding weight constant, cylinder appears to have more of an impact on mpg than if weight is disregarded."


## question 3
Consider the mtcars data set. Fit a model with mpg as the outcome that considers number of cylinders as a factor variable and weight as confounder. 

Now fit a second model with mpg as the outcome model that considers the interaction between number of cylinders (as a factor variable) and weight. 

Give the P-value for the likelihood ratio test comparing the two models and suggest a model using 0.05 as a type I error rate significance benchmark.

see See the end of lecture 02_05

```{r}
fit2 <- lm(mpg ~ cyl + wt, data=mtcars)
fit3 <- update(fit2, mpg ~ cyl * wt)
anova(fit2, fit3)
```


answer

"The P-value is larger than 0.05. So, according to our criterion, we would fail to reject, which suggests that the interaction terms may not be necessary."

## question 4
Consider the mtcars data set. Fit a model with mpg as the outcome that includes number of cylinders as a factor variable and weight inlcuded in the model as

```{r}
lm(mpg ~ I(wt * 0.5) + factor(cyl), data = mtcars)
fit <- lm(mpg ~ I(wt * 0.5) + factor(cyl), data = mtcars)
summary(fit)$coefficients
```

How is the wt coefficient interpretted?

Answer:

The estimated expected change in MPG per half ton increase in weight for for a specific number of cylinders (4, 6, 8).

## question 5
Consider the following data set

```{r}
x <- c(0.586, 0.166, -0.042, -0.614, 11.72)
y <- c(0.549, -0.026, -0.127, -0.751, 1.344)
```
Give the hat diagonal for the most influential point

```{r}
model <- lm(y ~ x)
influence.measures(model)
```

Answer

0.9946

TODO review lecture 02_04 residuals influence and diagnostics
